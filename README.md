# BBDC & Anki å•è¯æœ¬åŒæ­¥åŠ©æ‰‹ (Vocabulary Merger)

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Python å·¥å…·ï¼Œç”¨äºå°† Ankiï¼ˆæˆ–å…¶ä»–æ¥æºï¼‰ä¸­çš„å•è¯é‡Šä¹‰åŒæ­¥æ›´æ–°åˆ° BBDCï¼ˆæˆ–å…¶ä»–ç›®æ ‡æ–‡ä»¶ï¼‰ä¸­ã€‚å®ƒæ”¯æŒé«˜åº¦è‡ªå®šä¹‰çš„æ–‡ä»¶æ ¼å¼ã€æ™ºèƒ½åˆ—è¯†åˆ«ä»¥åŠâ€œsb/sthâ€ç¼©å†™å±•å¼€åŠŸèƒ½ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

* **æ™ºèƒ½åŒæ­¥**ï¼šä»¥ Anki çš„é‡Šä¹‰ä¸ºå‡†ï¼Œè¦†ç›–æˆ–è¡¥å…… BBDC æ–‡ä»¶ä¸­çš„é‡Šä¹‰ã€‚
* **ç¼©å†™å±•å¼€**ï¼šæ”¯æŒè‡ªåŠ¨å°† `sb` è½¬æ¢ä¸º `somebody`ï¼Œ`sth` è½¬æ¢ä¸º `something`ï¼Œæé«˜åŒ¹é…æˆåŠŸç‡ã€‚
* **é«˜åº¦è‡ªå®šä¹‰**ï¼š
    * æ”¯æŒè‡ªå®šä¹‰ Anki å’Œ BBDC æ–‡ä»¶çš„**åˆ†éš”ç¬¦**ï¼ˆå¦‚é€—å·ã€åˆ¶è¡¨ç¬¦ç­‰ï¼‰ã€‚
    * æ”¯æŒè‡ªå®šä¹‰**å•è¯åˆ—**å’Œ**é‡Šä¹‰åˆ—**çš„ç´¢å¼•ä½ç½®ã€‚
* **é…ç½®è®°å¿†**ï¼šè‡ªåŠ¨ä¿å­˜ä¸Šä¸€æ¬¡çš„è¿è¡Œé…ç½®ï¼Œæ”¯æŒä¸€é”®â€œè‡ªåŠ¨è¿è¡Œâ€ã€‚

## ğŸš€ ä½¿ç”¨æ­¥éª¤

### 1. å‡†å¤‡æ•°æ®æº
æœ¬å·¥å…·ä¸»è¦é…åˆ [BubeiDanci_takeout](https://github.com/ImQQiaoO/BubeiDanci_takeout) é¡¹ç›®ä½¿ç”¨ï¼š
1.  è¿è¡Œ `BubeiDanci_takeout` å¯¼å‡º `BBDC.csv`ã€‚
2.  **å…³é”®æ­¥éª¤**ï¼šå°† `BBDC.csv` å¦å­˜ä¸º `BBDC.txt`ã€‚
    * âš ï¸ **æ³¨æ„ï¼šå¿…é¡»ä¿å­˜ä¸º UTF-8 ç¼–ç æ ¼å¼ï¼Œå¦åˆ™ç¨‹åºæ— æ³•è¯»å–**ã€‚
3.  ä» Anki å¯¼å‡ºå•è¯å¡ç‰‡ï¼Œä¿å­˜ä¸º `Anki.txt` (é€šå¸¸ä¸º TXT æ ¼å¼)ã€‚

### 2. è¿è¡Œç¨‹åº
1.  ç›´æ¥è¿è¡Œæ‰“åŒ…å¥½çš„ `.exe` ç¨‹åºæˆ–é€šè¿‡ Python è¿è¡Œè„šæœ¬ã€‚
2.  æ ¹æ®æ§åˆ¶å°æç¤ºï¼Œè¾“å…¥æˆ–ç¡®è®¤æ–‡ä»¶è·¯å¾„ã€‚
3.  ç¨‹åºä¼šè‡ªåŠ¨åœ¨ `config/defaultConfig.json` ä¸­ä¿å­˜ä½ çš„è®¾ç½®ã€‚

## âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

é¦–æ¬¡è¿è¡Œåï¼Œç¨‹åºä¼šè‡ªåŠ¨ç”Ÿæˆ `config/defaultConfig.json`ã€‚ä½ å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹æ­¤æ–‡ä»¶ï¼Œæ”¯æŒå®Œæ•´çš„æ¨¡å—åŒ–é…ç½®ï¼š

```json
{
    "system": {
        "auto_run": false // ç³»ç»Ÿè®¾ç½®ï¼šæ˜¯å¦è·³è¿‡è¯¢é—®ç›´æ¥è¿è¡Œ (True: ä½¿ç”¨ä¿å­˜çš„é…ç½®è‡ªåŠ¨è¿è¡Œ; False: æ¯æ¬¡å¯åŠ¨æ—¶è¯¢é—®é…ç½®)
    },
    "files": {
        "bbdc_path": "BBDC.txt",       // æ–‡ä»¶è·¯å¾„ï¼šBBDC æºæ–‡ä»¶è·¯å¾„ (éœ€è¦æ›´æ–°çš„æ–‡ä»¶)
        "anki_path": "Anki.txt",       // æ–‡ä»¶è·¯å¾„ï¼šAnki å¯¼å‡ºæ–‡ä»¶è·¯å¾„ (ä½œä¸ºé‡Šä¹‰æ¥æº)
        "output_path": "BBDC_updated.txt" // æ–‡ä»¶è·¯å¾„ï¼šæœ€ç»ˆç»“æœè¾“å‡ºè·¯å¾„
    },
    "anki_template": {
        "delimiter": "\t", // Anki è§£æé…ç½®ï¼šåˆ—åˆ†éš”ç¬¦ (å¦‚åˆ¶è¡¨ç¬¦ "\t", é€—å· "," ç­‰)
        "word_index": 0,   // Anki è§£æé…ç½®ï¼šè‹±æ–‡å•è¯æ‰€åœ¨çš„åˆ—ç´¢å¼• (0 è¡¨ç¤ºç¬¬ä¸€åˆ—)
        "meaning_index": 1 // Anki è§£æé…ç½®ï¼šä¸­æ–‡é‡Šä¹‰æ‰€åœ¨çš„åˆ—ç´¢å¼• (0 è¡¨ç¤ºç¬¬ä¸€åˆ—)
    },
    "bbdc_template": {
        "delimiter": ",",  // BBDC è§£æé…ç½®ï¼šåˆ—åˆ†éš”ç¬¦
        "word_index": 1,   // BBDC è§£æé…ç½®ï¼šè‹±æ–‡å•è¯æ‰€åœ¨çš„åˆ—ç´¢å¼•
        "meaning_index": 2 // BBDC è§£æé…ç½®ï¼šä¸­æ–‡é‡Šä¹‰æ‰€åœ¨çš„åˆ—ç´¢å¼•
    },
    "switches": {
        "replace_sb": false,  // åŠŸèƒ½å¼€å…³ï¼šæ˜¯å¦å°†å•è¯ä¸­çš„ "sb" æ›¿æ¢ä¸º "somebody" (ä¾‹å¦‚ "hit sb" -> "hit somebody")
        "replace_sth": false  // åŠŸèƒ½å¼€å…³ï¼šæ˜¯å¦å°†å•è¯ä¸­çš„ "sth" æ›¿æ¢ä¸º "something"
    }
}
```


## ğŸ§ª æ•ˆæœæ¼”ç¤º

å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹çš„è¾“å…¥æ–‡ä»¶å’Œé…ç½®ï¼ˆå¼€å¯ `sb` æ›¿æ¢ï¼Œå…³é—­ `sth` æ›¿æ¢ï¼‰ï¼š

**è¾“å…¥æ–‡ä»¶ 1ï¼šBBDC.txt (ç›®æ ‡)**
```Plaintext
3831,argue for sth,-
123,test,æµ‹é€Ÿ
1321,admin,ç®¡ç†è€…
1321,admin sb,ç®¡ç†è€… sb
```

**è¾“å…¥æ–‡ä»¶ 2ï¼šAnki.txt (æ¥æº)**
```Plaintext
argue for something	ä¸ºâ€¦è¾©æŠ¤ï¼›ä¸»å¼ â€¦
test	æµ‹adw
admin	ç®¡ç†è€…
admin somebody	ç®¡ç†è€… somebawdody
```

**è¿è¡Œç»“æœï¼šBBDC_updated.txt**
```Plaintext
3831,argue for sth,-                 // ä¸åŒ¹é…ï¼šé…ç½®ä¸­ sth æœªå¼€å¯æ›¿æ¢
123,test,æµ‹adw                       // è¦†ç›–ï¼šAnki ä¼˜å…ˆçº§æ›´é«˜
1321,admin,ç®¡ç†è€…                    // ä¿æŒï¼šä¸¤è€…ç›¸åŒ
1321,admin somebody,ç®¡ç†è€… somebawdody // åŒ¹é…æˆåŠŸï¼šsb->somebody è‡ªåŠ¨è½¬æ¢
```

## ğŸ“¦ æ‰“åŒ…è¯´æ˜ (å¼€å‘è€…ç”¨)

å¦‚æœä½ æƒ³å°†è„šæœ¬æ‰“åŒ…æˆå¯æ‰§è¡Œæ–‡ä»¶ (`.exe`)ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1.  å®‰è£… PyInstallerï¼š
```Bash
pip install pyinstaller
```

2.  æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼š
```Bash
pyinstaller --onefile --console update_bbdc.py
```